(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const v of r.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&i(v)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();const H={work:{time:1500,label:"Focus Time",color:"#f43f5e"},short:{time:300,label:"Short Break",color:"#10b981"},long:{time:900,label:"Long Break",color:"#3b82f6"}};let s=JSON.parse(localStorage.getItem("pomodoro-modes"))||H,A=localStorage.getItem("pomodoro-sound-choice")||"classic",E="work",c=s[E].time,f=!1,R=null,g=s[E].time,a=null,u=!1,l=null,d=null;const U=document.getElementById("time-display"),N=document.getElementById("timer-label"),$=document.getElementById("progress-ring"),w=document.getElementById("btn-toggle"),j=document.getElementById("btn-reset"),q=document.querySelectorAll(".mode-btn"),z=document.body,F=document.getElementById("task-input"),J=document.getElementById("btn-settings"),m=document.getElementById("btn-sound"),p=document.getElementById("settings-modal"),W=document.getElementById("close-modal"),K=document.getElementById("save-settings"),b=document.getElementById("work-time"),V=document.getElementById("short-time"),B=document.getElementById("long-time"),x=document.getElementById("sound-select"),Y=document.getElementById("btn-preview-sound"),L=document.querySelector(".controls"),C=283,Q='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 5L6 9H2v6h4l5 4V5z"/><line x1="23" y1="9" x2="17" y2="15"/><line x1="17" y1="9" x2="23" y2="15"/></svg>',X='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>';function Z(){ee(),ae(),te(),_("work")}function ee(){w.addEventListener("click",re),j.addEventListener("click",ce),q.forEach(e=>{e.addEventListener("click",()=>{const o=e.dataset.mode;_(o)})}),F.addEventListener("input",e=>{localStorage.setItem("pomodoro-task",e.target.value)}),J.addEventListener("click",ie),W.addEventListener("click",k),K.addEventListener("click",se),p.addEventListener("click",e=>{e.target===p&&k()}),m.addEventListener("click",oe),Y.addEventListener("click",()=>{const e=x.value;P(e)})}function te(){const e=localStorage.getItem("pomodoro-task");e&&(F.value=e)}function M(){a||(a=new(window.AudioContext||window.webkitAudioContext)),a.state==="suspended"&&a.resume()}function ne(){P(A)}function P(e){M();const o=a,t=o.currentTime,i=o.createOscillator(),n=o.createGain();i.connect(n),n.connect(o.destination),e==="classic"?(i.type="sine",i.frequency.setValueAtTime(880,t),i.frequency.exponentialRampToValueAtTime(440,t+.5),n.gain.setValueAtTime(.8,t),n.gain.exponentialRampToValueAtTime(.01,t+.5),i.start(t),i.stop(t+.5)):e==="digital"?(i.type="square",i.frequency.setValueAtTime(1200,t),n.gain.setValueAtTime(.1,t),n.gain.setValueAtTime(0,t+.1),i.frequency.setValueAtTime(1200,t+.15),n.gain.setValueAtTime(.1,t+.15),n.gain.setValueAtTime(0,t+.25),i.start(t),i.stop(t+.3)):e==="chime"?[523.25,659.25,783.99,1046.5].forEach((v,G)=>{const y=o.createOscillator(),h=o.createGain();y.connect(h),h.connect(o.destination),y.frequency.value=v,y.type="triangle";const T=t+G*.1;h.gain.setValueAtTime(0,T),h.gain.linearRampToValueAtTime(.2,T+.1),h.gain.exponentialRampToValueAtTime(.01,T+2),y.start(T),y.stop(T+2)}):e==="alarm"&&(i.type="sawtooth",i.frequency.value=880,n.gain.setValueAtTime(.3,t),n.gain.setValueAtTime(0,t+.2),n.gain.setValueAtTime(.3,t+.4),n.gain.setValueAtTime(0,t+.6),n.gain.setValueAtTime(.3,t+.8),n.gain.setValueAtTime(0,t+1),i.start(t),i.stop(t+1))}function oe(){M(),u=!u,m.dataset.state=u?"on":"off",m.innerHTML=u?X:Q,u?(m.style.color="var(--current-accent)",f&&D()):(m.style.color="var(--text-muted)",O())}function D(){if(!u||!a||l)return;const e=a.sampleRate*2,o=a.createBuffer(1,e,a.sampleRate),t=o.getChannelData(0);let i=0;for(let n=0;n<e;n++){const r=Math.random()*2-1;i=(i+.02*r)/1.02,t[n]=i*3.5,t[n]*=.1}l=a.createBufferSource(),l.buffer=o,l.loop=!0,d=a.createGain(),d.gain.setValueAtTime(0,a.currentTime),d.gain.linearRampToValueAtTime(.5,a.currentTime+1),l.connect(d),d.connect(a.destination),l.start()}function O(){if(l&&d){const e=a.currentTime+.5;d.gain.linearRampToValueAtTime(0,e),l.stop(e),setTimeout(()=>{l=null,d=null},600)}}function ie(){b.value=Math.floor(s.work.time/60),V.value=Math.floor(s.short.time/60),B.value=Math.floor(s.long.time/60),x.value=A,p.classList.remove("hidden"),p.setAttribute("aria-hidden","false")}function k(){p.classList.add("hidden"),p.setAttribute("aria-hidden","true")}function se(){const e=parseInt(b.value)||25,o=parseInt(V.value)||5,t=parseInt(B.value)||15;s.work.time=e*60,s.short.time=o*60,s.long.time=t*60,A=x.value,localStorage.setItem("pomodoro-modes",JSON.stringify(s)),localStorage.setItem("pomodoro-sound-choice",A),f||(g=s[E].time,c=g,S()),k()}function ae(){b.value=Math.floor(s.work.time/60),V.value=Math.floor(s.short.time/60),B.value=Math.floor(s.long.time/60)}function _(e){E=e,g=s[e].time,c=g,O(),L.classList.remove("running"),q.forEach(o=>{o.classList.toggle("active",o.dataset.mode===e),o.setAttribute("aria-selected",o.dataset.mode===e)}),document.documentElement.style.setProperty("--current-accent",s[e].color),z.setAttribute("data-mode",e),u&&(m.style.color=s[e].color),N.textContent=s[e].label,I(),S()}function re(){f?I():le()}function le(){f||(M(),f=!0,w.textContent="Pause",w.classList.add("active"),L.classList.add("running"),u&&D(),R=setInterval(()=>{c>0?(c--,S()):ue()},1e3))}function I(){f=!1,w.textContent="Start",w.classList.remove("active"),clearInterval(R),O()}function ce(){I(),c=g,S(),L.classList.remove("running")}function ue(){I(),c=0,S(),ne(),L.classList.remove("running"),N.textContent="Time is up!"}function S(){const e=Math.floor(c/60),o=c%60,t=`${e.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`;U.textContent=t,document.title=`${t} - PomoFocus`,de(c)}function de(e){const t=e/g,i=C-t*C;$.style.strokeDashoffset=i}Z();
